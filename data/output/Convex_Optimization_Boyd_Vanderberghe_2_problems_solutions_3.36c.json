{
    "problem": "Derive the conjugates of the following functions. Piecewise-linear function on R. f(x) = max_{i=1,...,m}(a_ix + b_i) on R. You can assume that the a_i are sorted in increasing order, i.e., a_1 \u2264 ... \u2264 a_m, and that none of the functions a_ix + b_i is redundant, i.e., for each k there is at least one x with f(x) = a_kx + b_k.",
    "solution": "<think>\nOkay, so I have this problem where I need to find the conjugate of a piecewise-linear function. The function f(x) is defined as the maximum of several linear functions: f(x) = max_{i=1,...,m}(a_i x + b_i). The a_i's are sorted in increasing order, meaning a_1 \u2264 a_2 \u2264 ... \u2264 a_m, and none of the individual functions a_i x + b_i are redundant. That means for each k, there's some x where f(x) equals a_k x + b_k.\n\nHmm, conjugate functions. I remember that the conjugate of a function f, denoted as f^*, is defined as f^*(y) = sup{<x, y> - f(x) | x \u2208 R}, where <x, y> is the inner product, which in one dimension is just x*y. So, for each y, I need to find the supremum of x*y - f(x).\n\nSince f(x) is the maximum of several linear functions, maybe I can break this down. Let me think about the structure of f(x). Each a_i x + b_i is a linear function with slope a_i and intercept b_i. The maximum of these will be a piecewise-linear function, which is convex because it's the maximum of convex functions.\n\nI recall that the conjugate of a convex function is also convex, and in this case, since f is convex, f^* should be convex as well. But I need to find an explicit expression for f^*(y).\n\nLet me consider the definition of the conjugate function:\n\nf^*(y) = sup{ x*y - max_{i=1,...,m}(a_i x + b_i) }.\n\nSince the maximum is involved, I can rewrite this as:\n\nf^*(y) = sup{ x*y - (a_k x + b_k) } for some k, where a_k x + b_k is the maximum.\n\nBut since the maximum is taken over all i, the supremum will be the maximum over all i of sup{ x*y - (a_i x + b_i) }.\n\nSo, f^*(y) = max_{i=1,...,m} [ sup{ x*y - (a_i x + b_i) } ].\n\nLet me compute the inner supremum for each i:\n\nsup{ x*y - a_i x - b_i } = sup{ (x*y - a_i x) - b_i }.\n\nFactor out x:\n\nsup{ x*(y - a_i) - b_i }.\n\nThis is a linear function in x, and since the coefficient of x is (y - a_i), the supremum over x will depend on the sign of (y - a_i).\n\nIf y - a_i > 0, then as x approaches infinity, the expression goes to infinity, so the supremum is infinity.\n\nIf y - a_i < 0, then as x approaches negative infinity, the expression goes to infinity, so the supremum is also infinity.\n\nIf y - a_i = 0, then the expression is just -b_i, so the supremum is -b_i.\n\nTherefore, for each i, sup{ x*y - a_i x - b_i } is:\n\n- If y > a_i: infinity\n- If y < a_i: infinity\n- If y = a_i: -b_i\n\nSo, the supremum over all i is the maximum of (-b_i) for all i where y = a_i.\n\nBut wait, the problem states that none of the functions a_i x + b_i is redundant. That means for each k, there exists some x where f(x) = a_k x + b_k. So, for each k, there's an x such that a_k x + b_k is the maximum. That implies that for each k, y = a_k is attainable as a support point of f.\n\nTherefore, for each k, y = a_k is such that f^*(y) = -b_k.\n\nBut since the a_i's are sorted, and none are redundant, each a_i is a unique slope, and each a_i is achieved at some x.\n\nSo, putting it all together, f^*(y) is equal to the maximum of (-b_i) over all i where y = a_i.\n\nBut wait, is that all? Let me think again.\n\nSuppose y is such that y = a_k for some k. Then, f^*(y) = -b_k.\n\nIf y is not equal to any a_i, then for each i, either y > a_i or y < a_i, which would make the supremum infinity. But since f is convex and piecewise-linear, its conjugate should be convex and piecewise-linear as well.\n\nBut wait, if y is not equal to any a_i, then f^*(y) would be infinity? That can't be right because the conjugate function should be finite everywhere if f is proper and lower semi-continuous.\n\nWait, maybe I made a mistake in the reasoning. Let me double-check.\n\nThe conjugate function f^*(y) is defined as sup{ x*y - f(x) }, where f(x) is the maximum of a_i x + b_i.\n\nSo, f(x) = max_i (a_i x + b_i). Therefore, x*y - f(x) = x*y - max_i (a_i x + b_i).\n\nWhich is equal to max_i (x*y - a_i x - b_i).\n\nSo, for each x, we have x*y - f(x) = max_i (x*y - a_i x - b_i).\n\nTherefore, f^*(y) = sup_x max_i (x*y - a_i x - b_i).\n\nBut since the maximum is over i, we can interchange the supremum and the maximum:\n\nf^*(y) = max_i sup_x (x*y - a_i x - b_i).\n\nSo, for each i, compute sup_x (x*y - a_i x - b_i).\n\nWhich is sup_x (x*(y - a_i) - b_i).\n\nThis is a linear function in x. The supremum over x is either infinity or a finite value.\n\nIf y - a_i > 0, then as x approaches infinity, the expression goes to infinity, so the supremum is infinity.\n\nIf y - a_i < 0, then as x approaches negative infinity, the expression goes to infinity, so the supremum is infinity.\n\nIf y - a_i = 0, then the expression is -b_i, so the supremum is -b_i.\n\nTherefore, for each i, sup_x (x*y - a_i x - b_i) is:\n\n- If y > a_i: infinity\n- If y < a_i: infinity\n- If y = a_i: -b_i\n\nTherefore, f^*(y) is the maximum over all i of (-b_i) when y = a_i, and infinity otherwise.\n\nBut since f is convex and piecewise-linear, f^* should also be convex and piecewise-linear. So, f^*(y) is equal to the maximum of (-b_i) over all i where y = a_i.\n\nBut wait, if y is not equal to any a_i, then f^*(y) is infinity, which would mean that f^* is not finite everywhere. But f is a proper convex function, so f^* should be convex and lower semi-continuous, hence finite everywhere.\n\nHmm, so perhaps my reasoning is flawed here. Maybe I need to consider the fact that for each i, the function x*y - a_i x - b_i is linear, and the supremum over x is the maximum of these linear functions.\n\nBut if y is not equal to any a_i, then for each i, either y > a_i or y < a_i, so the supremum is infinity. Therefore, f^*(y) would be infinity for all y not in the set {a_1, a_2, ..., a_m}.\n\nBut that can't be, because f is a convex function, so its conjugate should be convex and lower semi-continuous, hence finite everywhere.\n\nWait, maybe I need to think differently. Perhaps the conjugate function f^*(y) is the maximum of (-b_i) over all i where y = a_i, but only when y is in the set {a_1, a_2, ..., a_m}. Otherwise, it's infinity.\n\nBut that would mean f^* is a step function, which is convex but not differentiable. But f is piecewise-linear, so f^* should also be piecewise-linear.\n\nWait, perhaps I need to consider that for each i, the function x*y - a_i x - b_i is linear, and the supremum over x is the maximum of these linear functions. But if y is not equal to any a_i, then for each i, either y > a_i or y < a_i, so the supremum is infinity. Therefore, f^*(y) is infinity for all y not in {a_1, ..., a_m}.\n\nBut that contradicts the fact that f is a proper convex function, so f^* should be proper, meaning finite everywhere.\n\nWait, maybe I'm missing something. Let me think about the definition again.\n\nf(x) = max_{i=1,...,m} (a_i x + b_i). So, f(x) is the upper envelope of these linear functions.\n\nThe conjugate function f^*(y) is defined as sup{ x*y - f(x) }.\n\nSo, for each x, x*y - f(x) is x*y minus the maximum of a_i x + b_i.\n\nWhich is equal to max"
}